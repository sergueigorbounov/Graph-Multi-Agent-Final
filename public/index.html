<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% {
              transform: scale(1);
              opacity: 1;
          }
          50% {
              transform: scale(1.03);
              opacity: 0.85;
          }
      }

      @keyframes glow {
          0%, 100% {
              text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);
          }
          50% {
              text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
          }
      }

      @keyframes brightness {
          0%, 100% {
              filter: brightness(100%);
          }
          50% {
              filter: brightness(150%);
          }
      }

      @keyframes blurBreathe {
          0%, 100% {
              filter: blur(0px);
          }
          50% {
              filter: blur(8px);
          }
      }

      /* Background Layer Styles */
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black;
          position: relative;
      }

      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background:
                  radial-gradient(circle, transparent 100%, black 100%),
                  url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: brightness 8s infinite alternate ease-in-out, blurBreathe 10s infinite alternate ease-in-out;
          z-index: -1;
      }

      /* Glowing Link Styles */
      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }

      .top-right-link:hover {
          color: #ffffff;
          text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255);
      }

      /* Title Styles */
      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          -webkit-background-clip: text;

          text-shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

          margin-top: 90px;
          margin-bottom: 50px;

      }

      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          animation: breathe 10s infinite ease-in-out;
          gap: 20px;
          margin-bottom: 50px;
      }

      .form {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }

      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }

      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
          animation: breathe 10s infinite ease-in-out;
      }

      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
          animation: glow 6s infinite ease-in-out;
      }

      .user-message {
          align-self: flex-end;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
      }

      .system-message {
          align-self: flex-start;
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
      }

      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
          animation: glow 10s infinite alternate ease-in-out;
      }

      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
          shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe
      src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
      frameBorder="0"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const displayedLogs = new Set();

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;

    if (!displayedLogs.has(logEntry)) {
      const logElement = document.createElement("div");
      logElement.className = `message ${isUser ? "user-message" : "system-message"}`;
      logElement.textContent = logEntry;
      logsDiv.appendChild(logElement);

      displayedLogs.add(logEntry);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    }
  };

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }

    appendLog(`You: ${query}`, true);

    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json();

      let lastContent = "No content found.";
      if (result?.processingDetails) {
        for (const detail of result.processingDetails) {
          const state = detail?.supervisorState;
          if (state) {
            for (const key in state) {
              const messages = state[key]?.messages;
              if (messages && messages.length > 0) {
                lastContent = messages[messages.length - 1]?.kwargs?.content || lastContent;
              }
            }
          }
        }
      }

      appendLog(`Chef: ${lastContent}`, false);
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    displayedLogs.clear();
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% {
              transform: scale(1);
              opacity: 1;
          }
          50% {
              transform: scale(1.03);
              opacity: 0.85;
          }
      }

      @keyframes glow {
          0%, 100% {
              text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);
          }
          50% {
              text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
          }
      }

      @keyframes brightness {
          0%, 100% {
              filter: brightness(100%);
          }
          50% {
              filter: brightness(150%);
          }
      }

      @keyframes blurBreathe {
          0%, 100% {
              filter: blur(0px);
          }
          50% {
              filter: blur(8px);
          }
      }

      /* Background Layer Styles */
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black;
          position: relative;
      }

      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle, transparent 100%, black 100%),
          url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: brightness 8s infinite alternate ease-in-out, blurBreathe 10s infinite alternate ease-in-out;
          z-index: -1;
      }

      /* Glowing Link Styles */
      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }

      .top-right-link:hover {
          color: #ffffff;
          text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255);
      }

      /* Title Styles */
      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          text-shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);
          margin-top: 90px;
          margin-bottom: 50px;
      }

      /* Container */
      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          animation: breathe 10s infinite ease-in-out;
          gap: 20px;
          margin-bottom: 50px;
      }

      /* Input and Buttons */
      .form {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }

      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }

      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      /* Logs */
      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
          animation: breathe 10s infinite ease-in-out;
      }

      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
          animation: glow 6s infinite ease-in-out;
      }

      .user-message {
          align-self: flex-end;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
      }

      .system-message {
          align-self: flex-start;
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
      }

      /* Spotify */
      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
          animation: glow 10s infinite alternate ease-in-out;
      }

      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
          .container {
              width: 95%;
              gap: 15px;
          }

          .logs {
              height: 40%;
          }

          .input-field, .submit-btn, .clear-btn {
              font-size: 14px;
              padding: 10px;
          }

          .title {
              font-size: 2em;
              margin-top: 70px;
              margin-bottom: 40px;
          }
      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe
      src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
      frameBorder="0"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const displayedLogs = new Set();

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;

    if (!displayedLogs.has(logEntry)) {
      const logElement = document.createElement("div");
      logElement.className = `message ${isUser ? "user-message" : "system-message"}`;
      logElement.textContent = logEntry;
      logsDiv.appendChild(logElement);

      displayedLogs.add(logEntry);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    }
  };

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }

    submitButton.disabled = true;
    submitButton.textContent = "Submitting...";

    appendLog(`You: ${query}`, true);

    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json(); // Expect JSON response
      appendLog(`Supervisor Response: ${result.response}`, false);
      appendLog(`Reasoning: ${result.reasoning}`, false);
      appendLog(`Summary: ${result.summary}`, false);
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    } finally {
      submitButton.disabled = false;
      submitButton.textContent = "Submit";
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    displayedLogs.clear();
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.03); opacity: 0.85; }
      }
      @keyframes glow {
          0%, 100% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4); }
          50% { text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8); }
      }
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black;
          position: relative;
      }
      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle, transparent 100%, black 100%), url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: breathe 10s infinite ease-in-out;
          z-index: -1;
      }
      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }
      .top-right-link:hover { text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255); }
      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          margin-top: 90px;
          margin-bottom: 50px;
      }
      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          animation: breathe 10s infinite ease-in-out;
          gap: 20px;
          margin-bottom: 50px;
      }
      .form {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }
      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }
      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }
      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }
      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }
      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
          animation: breathe 10s infinite ease-in-out;
      }
      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
          animation: glow 6s infinite ease-in-out;
      }
      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
          animation: glow 10s infinite alternate ease-in-out;
      }
      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
            frameborder="0" allowfullscreen
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const displayedLogs = new Set();

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;
    if (!displayedLogs.has(logEntry)) {
      const logElement = document.createElement("div");
      logElement.className = "message";
      logElement.textContent = logEntry;
      logsDiv.appendChild(logElement);
      displayedLogs.add(logEntry);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    }
  };

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }
    submitButton.disabled = true;
    submitButton.textContent = "Submitting...";
    appendLog(`You: ${query}`, true);
    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json();
      if (result.status === "success") {
        appendLog(`Response: ${result.response}`, false);
        appendLog(`Reasoning: ${result.reasoning}`, false);
        appendLog(`Summary: ${result.summary}`, false);
      } else {
        appendLog("Unexpected server response.", false);
      }
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    } finally {
      submitButton.disabled = false;
      submitButton.textContent = "Submit";
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    displayedLogs.clear();
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>

-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% {
              transform: scale(1);
              opacity: 1;
          }
          50% {
              transform: scale(1.03);
              opacity: 0.85;
          }
      }

      @keyframes glow {
          0%, 100% {
              text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);
          }
          50% {
              text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
          }
      }

      @keyframes brightness {
          0%, 100% {
              filter: brightness(100%);
          }
          50% {
              filter: brightness(150%);
          }
      }

      @keyframes blurBreathe {
          0%, 100% {
              filter: blur(0px);
          }
          50% {
              filter: blur(8px);
          }
      }

      /* Background Layer Styles */
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black;
          position: relative;
      }

      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle, transparent 100%, black 100%),
          url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: brightness 8s infinite alternate ease-in-out, blurBreathe 10s infinite alternate ease-in-out;
          z-index: -1;
      }

      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }

      .top-right-link:hover {
          color: #ffffff;
          text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255);
      }

      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          text-shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);
          margin-top: 90px;
          margin-bottom: 50px;
      }

      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          gap: 20px;
          margin-bottom: 50px;
      }

      .form {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }

      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }

      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
      }

      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
      }

      .user-message {
          align-self: flex-end;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
      }

      .system-message {
          align-self: flex-start;
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
      }

      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
      }

      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe
      src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
      frameBorder="0"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;
    const logElement = document.createElement("div");
    logElement.className = `message ${isUser ? "user-message" : "system-message"}`;
    logElement.textContent = logEntry;
    logsDiv.appendChild(logElement);
    logsDiv.scrollTop = logsDiv.scrollHeight;
  };

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }

    appendLog(`You: ${query}`, true);

    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json();
      appendLog(`Response: ${result.response}`, false);
      appendLog(`Reasoning: ${result.reasoning}`, false);
      appendLog(`Summary: ${result.summary}`, false);
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Workflow Display</title>
  <style>
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          background-color: black;
          color: white;
          overflow: hidden;
      }

      .container {
          text-align: center;
          width: 90%;
          max-width: 600px;
      }

      .form {
          display: flex;
          flex-direction: column;
          gap: 15px;
      }

      .input-field {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          border: none;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
          cursor: pointer;
      }

      .results {
          margin-top: 30px;
          padding: 20px;
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 10px;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          font-family: monospace;
          text-align: left;
      }

      .result-item {
          margin-bottom: 15px;
          line-height: 1.6;
      }

      .result-item span {
          color: #00afff;
          font-weight: bold;
      }
  </style>
</head>
<body>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
  </div>
  <div class="results" id="results">
    <div class="result-item"><span>User Input:</span> <span id="user-input">-</span></div>
    <div class="result-item"><span>Workflow Result:</span> <span id="workflow-result">-</span></div>
  </div>
</div>

<script>
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const userInputDisplay = document.getElementById("user-input");
  const workflowResultDisplay = document.getElementById("workflow-result");

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      alert("Please enter a query.");
      return;
    }

    // Display user input dynamically
    userInputDisplay.textContent = query;

    try {
      // Simulate a backend call
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json();

      // Display the result of the workflow dynamically
      workflowResultDisplay.textContent = result.summary || "No result provided.";
    } catch (error) {
      workflowResultDisplay.textContent = `Error: ${error.message}`;
    }
  });
</script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Workflow Display</title>
  <style>
      body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #000;
          color: #fff;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
      }

      .container {
          text-align: center;
          width: 80%;
          max-width: 600px;
      }

      .input-section {
          margin-bottom: 20px;
      }

      .input-field {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          border-radius: 4px;
          border: none;
          margin-bottom: 10px;
      }

      .submit-btn {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          color: #fff;
          background-color: #007bff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
      }

      .submit-btn:hover {
          background-color: #0056b3;
      }

      .output-section {
          margin-top: 20px;
          padding: 10px;
          background-color: #222;
          border-radius: 4px;
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      }

      .output-title {
          font-weight: bold;
          margin-bottom: 10px;
      }

      .output-content {
          white-space: pre-wrap;
          word-wrap: break-word;
          color: #0f0;
      }
  </style>
</head>
<body>
<div class="container">
  <div class="input-section">
    <input type="text" id="userInput" class="input-field" placeholder="Enter your query here...">
    <button id="submitBtn" class="submit-btn">Submit</button>
  </div>
  <div class="output-section">
    <div class="output-title">Workflow Result:</div>
    <div id="output" class="output-content">No summary provided.</div>
  </div>
</div>

<script>
  document.getElementById("submitBtn").addEventListener("click", async () => {
    const userInput = document.getElementById("userInput").value.trim();
    const outputDiv = document.getElementById("output");

    // Clear previous output
    outputDiv.textContent = "Processing...";

    if (!userInput) {
      outputDiv.textContent = "Please enter a query.";
      return;
    }

    try {
      // Send request to the backend
      const response = await fetch(`/invoke?query=${encodeURIComponent(userInput)}`);
      const result = await response.json();

      // Display result
      const summary = result.summary || "No summary provided.";
      outputDiv.textContent = `User Input: ${userInput}\n\nWorkflow Result: ${summary}`;
    } catch (error) {
      // Handle errors
      outputDiv.textContent = `Error: ${error.message}`;
    }
  });
</script>
</body>
</html>
-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Workflow Display</title>
  <style>
      body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #000;
          color: #fff;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
      }

      .container {
          text-align: center;
          width: 80%;
          max-width: 600px;
      }

      .input-section {
          margin-bottom: 20px;
      }

      .input-field {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          border-radius: 4px;
          border: none;
          margin-bottom: 10px;
      }

      .submit-btn {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          color: #fff;
          background-color: #007bff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
      }

      .submit-btn:hover {
          background-color: #0056b3;
      }

      .output-section {
          margin-top: 20px;
          padding: 10px;
          background-color: #222;
          border-radius: 4px;
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      }

      .output-title {
          font-weight: bold;
          margin-bottom: 10px;
      }

      .output-content {
          white-space: pre-wrap;
          word-wrap: break-word;
          color: #0f0;
      }
  </style>
</head>
<body>
<div class="container">
  <div class="input-section">
    <input type="text" id="userInput" class="input-field" placeholder="Enter your query here...">
    <button id="submitBtn" class="submit-btn">Submit</button>
  </div>
  <div class="output-section">
    <div class="output-title">Workflow Result:</div>
    <div id="output" class="output-content">No response yet.</div>
  </div>
</div>

<script>
  document.getElementById("submitBtn").addEventListener("click", async () => {
    const userInput = document.getElementById("userInput").value.trim();
    const outputDiv = document.getElementById("output");

    // Clear previous output
    outputDiv.textContent = "Processing...";

    if (!userInput) {
      outputDiv.textContent = "Please enter a query.";
      return;
    }

    try {
      // Send request to the backend
      const response = await fetch(`/invoke?query=${encodeURIComponent(userInput)}`);
      const result = await response.json();

      // Display result
      const fullResponse = JSON.stringify(result, null, 2); // Pretty print JSON
      outputDiv.textContent = `User Input: ${userInput}\n\nFull Response:\n${fullResponse}`;
    } catch (error) {
      // Handle errors
      outputDiv.textContent = `Error: ${error.message}`;
    }
  });
</script>
</body>
</html>

-->
<!--

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Workflow Display</title>
  <style>
      body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          background-color: #000;
          color: #fff;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          height: 100vh;
      }

      .container {
          text-align: center;
          width: 80%;
          max-width: 600px;
      }

      .input-section {
          margin-bottom: 20px;
      }

      .input-field {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          border-radius: 4px;
          border: none;
          margin-bottom: 10px;
      }

      .submit-btn {
          width: 100%;
          padding: 10px;
          font-size: 16px;
          color: #fff;
          background-color: #007bff;
          border: none;
          border-radius: 4px;
          cursor: pointer;
      }

      .submit-btn:hover {
          background-color: #0056b3;
      }

      .output-section {
          margin-top: 20px;
          padding: 10px;
          background-color: #222;
          border-radius: 4px;
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
      }

      .output-title {
          font-weight: bold;
          margin-bottom: 10px;
      }

      .output-content {
          white-space: pre-wrap;
          word-wrap: break-word;
          color: #0f0;
      }
  </style>
</head>
<body>
<div class="container">
  <div class="input-section">
    <input type="text" id="userInput" class="input-field" placeholder="Enter your query here...">
    <button id="submitBtn" class="submit-btn">Submit</button>
  </div>
  <div class="output-section">
    <div class="output-title">Workflow Result:</div>
    <div id="output" class="output-content">No response yet.</div>
  </div>
</div>

<script>
  document.getElementById("submitBtn").addEventListener("click", async () => {
    const userInput = document.getElementById("userInput").value.trim();
    const outputDiv = document.getElementById("output");

    // Clear previous output
    outputDiv.textContent = "Processing...";

    if (!userInput) {
      outputDiv.textContent = "Please enter a query.";
      return;
    }

    try {
      // Send request to the backend
      const response = await fetch(`/invoke?query=${encodeURIComponent(userInput)}`);
      const result = await response.json();

      // Find the last 'content' value inside the nested structure
      let lastContent = "No content found.";

      const processingDetails = result.processingDetails;
      if (processingDetails && Array.isArray(processingDetails)) {
        // Iterate over processingDetails in reverse to find the last "content"
        for (let i = processingDetails.length - 1; i >= 0; i&#45;&#45;) {
          const supervisorState = processingDetails[i].supervisorState;

          // Dynamically check all keys in supervisorState
          for (const key in supervisorState) {
            const stateData = supervisorState[key];
            if (stateData?.messages?.length) {
              // Access the last message in the messages array
              const lastMessage = stateData.messages[stateData.messages.length - 1];

              // Extract the content field from kwargs if it exists
              if (lastMessage.kwargs?.content) {
                lastContent = lastMessage.kwargs.content;
                break; // Exit inner loop as we found the last content
              }
            }
          }

          if (lastContent !== "No content found.") {
            break; // Exit outer loop if content is found
          }
        }
      }

      // Display the extracted 'content'
      outputDiv.innerHTML = `
      <p>User Input: <span style="color: #0f0;">${userInput}</span></p>
      <p>Last Content: <span style="color: #0f0;">${lastContent}</span></p>
    `;
    } catch (error) {
      // Handle errors
      outputDiv.textContent = `Error: ${error.message}`;
    }
  });

</script>
</body>
</html>-->
<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% {
              transform: scale(1);
              opacity: 1;
          }
          50% {
              transform: scale(1.03);
              opacity: 0.85;
          }
      }

      @keyframes glow {
          0%, 100% {
              text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);
          }
          50% {
              text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
          }
      }

      @keyframes brightness {
          0%, 100% {
              filter: brightness(100%);
          }
          50% {
              filter: brightness(150%);
          }
      }

      @keyframes blurBreathe {
          0%, 100% {
              filter: blur(0px);
          }
          50% {
              filter: blur(8px);
          }
      }

      /* Background Layer Styles */
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black; /* Secondary background layer */
          position: relative;
      }

      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background:
                  radial-gradient(circle, transparent 100%, black 100%),
                  url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: brightness 8s infinite alternate ease-in-out, blurBreathe 10s infinite alternate ease-in-out;
          z-index: -1; /* Behind everything */
      }

      /* Glowing Link Styles */
      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }

      .top-right-link:hover {
          color: #ffffff;
          text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255);
      }

      /* Title Styles */
      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          -webkit-background-clip: text;

          text-shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

          margin-top: 90px;
          margin-bottom: 50px;

      }


      /* Container */
      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          animation: breathe 10s infinite ease-in-out;
          gap: 20px; /* Space between elements */
          margin-bottom: 50px;
      }

      /* Input and Buttons */
      .form {
          display: flex;
          gap: 10px; /* Space between input and buttons */
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }

      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }

      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      /* Logs */
      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
          animation: breathe 10s infinite ease-in-out;
      }

      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
          animation: glow 6s infinite ease-in-out;
      }

      .user-message {
          align-self: flex-end;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
      }

      .system-message {
          align-self: flex-start;
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
      }

      /* Spotify */
      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
          animation: glow 10s infinite alternate ease-in-out;
      }

      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
          shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe
      src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
      frameBorder="0"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const displayedLogs = new Set();

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;

    if (!displayedLogs.has(logEntry)) {
      const logElement = document.createElement("div");
      logElement.className = `message ${isUser ? "user-message" : "system-message"}`;
      logElement.textContent = logEntry;
      logsDiv.appendChild(logElement);

      displayedLogs.add(logEntry);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    }
  };

  setInterval(async () => {
    try {
      const response = await fetch('/logs');
      const text = await response.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');
      const logs = doc.querySelector('pre') ? doc.querySelector('pre').textContent : '';

      logs.split('\n').forEach((logLine) => {
        if (logLine && !logLine.startsWith("Query processed successfully")) {
          appendLog(logLine.trim());
        }
      });
    } catch (error) {
      console.error('Error fetching logs:', error);
    }
  }, 3000);

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }

    appendLog(`You: ${query}`, true);

    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.text();

      if (!result.startsWith("Query processed successfully")) {
        appendLog(result, false);
      }
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    displayedLogs.clear();
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chercheur, Gestionnaire, Chef et le Panier</title>
  <style>
      /* Global Breathing Animations */
      @keyframes breathe {
          0%, 100% {
              transform: scale(1);
              opacity: 1;
          }
          50% {
              transform: scale(1.03);
              opacity: 0.85;
          }
      }

      @keyframes glow {
          0%, 100% {
              text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);
          }
          50% {
              text-shadow: 0 0 20px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
          }
      }

      @keyframes brightness {
          0%, 100% {
              filter: brightness(100%);
          }
          50% {
              filter: brightness(150%);
          }
      }

      @keyframes blurBreathe {
          0%, 100% {
              filter: blur(0px);
          }
          50% {
              filter: blur(8px);
          }
      }

      /* Background Layer Styles */
      body {
          margin: 0;
          font-family: Arial, sans-serif;
          height: 100vh;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden;
          background-color: black;
          position: relative;
      }

      body::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background:
                  radial-gradient(circle, transparent 100%, black 100%),
                  url('perenoel.webp') no-repeat center center fixed;
          background-size: cover;
          animation: brightness 8s infinite alternate ease-in-out, blurBreathe 10s infinite alternate ease-in-out;
          z-index: -1;
      }

      /* Glowing Link Styles */
      .top-right-link {
          position: absolute;
          top: 30px;
          right: 50px;
          font-size: 1.5em;
          color: white;
          text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgb(255, 255, 255);
          text-decoration: none;
          font-weight: bold;
          animation: glow 4s infinite alternate ease-in-out;
      }

      .top-right-link:hover {
          color: #ffffff;
          text-shadow: 0 0 20px rgb(255, 255, 255), 0 0 100px rgb(255, 255, 255);
      }

      /* Title Styles */
      .title {
          font-size: 2.5em;
          font-weight: bold;
          color: #30bc0f;
          animation: breathe 10s infinite ease-in-out;
          -webkit-background-clip: text;

          text-shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

          margin-top: 90px;
          margin-bottom: 50px;

      }

      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: space-evenly;
          width: 90%;
          height: 90%;
          animation: breathe 10s infinite ease-in-out;
          gap: 20px;
          margin-bottom: 50px;
      }

      .form {
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          width: 100%;
          max-width: 600px;
          animation: glow 10s infinite ease-in-out;
      }

      .input-field, .submit-btn, .clear-btn {
          padding: 15px;
          font-size: 16px;
          border-radius: 8px;
          animation: glow 8s infinite alternate ease-in-out;
          flex: 1;
          max-width: 200px;
      }

      .input-field {
          border: 1px solid rgba(255, 255, 255, 0.5);
          background-color: rgba(0, 0, 0, 0.5);
          color: white;
          text-align: center;
      }

      .submit-btn {
          background-color: rgba(0, 123, 255, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .clear-btn {
          background-color: rgba(255, 76, 76, 0.8);
          color: #fff;
          border: none;
          cursor: pointer;
      }

      .logs {
          width: 80%;
          height: 50%;
          overflow-y: auto;
          background-color: rgba(18, 18, 18, 0.8);
          color: #0f0;
          padding: 15px;
          font-family: monospace;
          border-radius: 10px;
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
          animation: breathe 10s infinite ease-in-out;
      }

      .message {
          background-color: rgba(255, 255, 255, 0.1);
          border-radius: 8px;
          padding: 10px;
          margin: 5px 0;
          font-size: 14px;
          line-height: 1.4;
          word-wrap: break-word;
          animation: glow 6s infinite ease-in-out;
      }

      .user-message {
          align-self: flex-end;
          background-color: rgba(0, 123, 255, 0.8);
          color: white;
      }

      .system-message {
          align-self: flex-start;
          background-color: rgba(0, 0, 0, 0.7);
          color: white;
      }

      .spotify-layer {
          width: 80%;
          max-width: 700px;
          border-radius: 12px;
          animation: glow 10s infinite alternate ease-in-out;
      }

      .spotify-layer iframe {
          width: 100%;
          height: 100%;
          border-radius: 12px;
          shadow: 0 0 10px rgb(0, 0, 0), 0 0 20px rgb(0, 0, 0);

      }
  </style>
</head>
<body>
<a href="https://camerone-frontend.vercel.app/" target="_blank" class="top-right-link">Noël des Braves</a>
<div class="title">Chercheur, Gestionnaire, Chef et le Panier</div>
<div class="container">
  <div class="form">
    <input type="text" id="query" class="input-field" placeholder="Enter your query" />
    <button id="submit" class="submit-btn">Submit</button>
    <button id="clear" class="clear-btn">Clear Logs</button>
  </div>
  <div class="logs" id="logs"></div>
  <div class="spotify-layer">
    <iframe
      src="https://open.spotify.com/embed/track/6syO6UTl8QiiWADJy3Uy2d?utm_source=generator"
      frameBorder="0"
      allowfullscreen
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>
</div>
<script>
  const logsDiv = document.getElementById("logs");
  const queryInput = document.getElementById("query");
  const submitButton = document.getElementById("submit");
  const clearButton = document.getElementById("clear");

  const displayedLogs = new Set();

  const appendLog = (message, isUser = false) => {
    const timestamp = new Date().toISOString();
    const logEntry = `[${timestamp}] ${message}`;

    if (!displayedLogs.has(logEntry)) {
      const logElement = document.createElement("div");
      logElement.className = `message ${isUser ? "user-message" : "system-message"}`;
      logElement.textContent = logEntry;
      logsDiv.appendChild(logElement);

      displayedLogs.add(logEntry);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    }
  };

  submitButton.addEventListener("click", async () => {
    const query = queryInput.value.trim();
    if (!query) {
      appendLog("Please enter a query.", false);
      return;
    }

    appendLog(`You: ${query}`, true);

    try {
      const response = await fetch(`/invoke?query=${encodeURIComponent(query)}`);
      const result = await response.json();

      let lastContent = "No content found.";
      if (result?.processingDetails) {
        for (const detail of result.processingDetails) {
          const state = detail?.supervisorState;
          if (state) {
            for (const key in state) {
              const messages = state[key]?.messages;
              if (messages && messages.length > 0) {
                lastContent = messages[messages.length - 1]?.kwargs?.content || lastContent;
              }
            }
          }
        }
      }

      appendLog(`Chef: ${lastContent}`, false);
    } catch (error) {
      appendLog(`Error: ${error.message}`, false);
    }
  });

  clearButton.addEventListener("click", () => {
    logsDiv.innerHTML = "";
    displayedLogs.clear();
    appendLog("Logs cleared.", false);
  });
</script>
</body>
</html>
